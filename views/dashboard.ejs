<!DOCTYPE html>

<html>
<head>
    <title>flight_Bord</title>
    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
	<!--===============================================================================================-->
	<!-- <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css"> -->
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="style.css">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>


    <!-- Reference to the Bing Maps SDK -->
    <script type='text/javascript'
        src='http://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=Am7ABZsl1hVs093AjZV82C3wxd-NCQ-KtBLpdtv4uB1UBvqIx7vcgN7Dw1A9RpQt'
        async defer></script>


        
    <script type="text/javascript">
        function initSocket() {
            //socket is global
            socket = io.connect();
            alert("connected");
            setMap();
        }
        //console.log(rows);

        var map = null;
        var rows = <%-JSON.stringify(data)%>;
       


        var row = rows[1];
        var location1 = row.Location;
        console.log(typeof location1);
        console.log(location1);
        function setMap() {
            map = new Microsoft.Maps.Map(document.getElementById("myMap"), { credentials: "Am7ABZsl1hVs093AjZV82C3wxd-NCQ-KtBLpdtv4uB1UBvqIx7vcgN7Dw1A9RpQt" });
        }


        function add()
        {
           

            var loc1 = new Microsoft.Maps.Location(37.983810,23.727539);
            var loc2 = new Microsoft.Maps.Location(32.817280,34.988762);
            var loc3 = new Microsoft.Maps.Location(30.044420, 31.235712);
            var loc4 = new Microsoft.Maps.Location(35.0, 30.0);
          
            // Add a pin to the map
            var pin1 = new Microsoft.Maps.Pushpin(loc1);
            var pin2 = new Microsoft.Maps.Pushpin(loc2);
            var pin3 = new Microsoft.Maps.Pushpin(loc3);
            
            pin4 = new Microsoft.Maps.Pushpin(loc4, {
                //icon: 'airplane.png',
                anchor: new Microsoft.Maps.Point(10, 10)
            });
           
            // Create a polyline
            var lineVertices = new Array(loc1, loc2);
            var line = new Microsoft.Maps.Polyline(lineVertices);

            map.setView({ center: loc2, zoom: 4 });

            map.entities.push(line);
            map.entities.push(pin1);
            map.entities.push(pin2);
            map.entities.push(pin3);
            map.entities.push(pin4);
           
        }
        function move() {
            for (var i = map.entities.getLength() - 1; i >= 0; i--) {
                var pushpin = map.entities.get(i);
                if (pushpin instanceof Microsoft.Maps.Pushpin) {
                    map.entities.removeAt(i);
                }
            }
        }       
        
    </script>
</head>

<body onload="initSocket()">

    <div id="myMap"></div>
    <input type="button" onclick="add()" value="הוסף אייקונים" />
    <input type="button" onclick="move()" value="הסר אייקונים" />
    
</body>
</body>


</html>
       